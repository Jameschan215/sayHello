{% extends 'base.html' %}

{% block main %}

    <form action="" method="post" novalidate>
        {{ form.hidden_tag() }}

        <div class="form-group">
            {{ form.name.label }}
            <br>
            {{ form.name(size=32, class_='form-control') }}

            {% for error in form.name.errors %}
                <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
            <br>
        </div>

        <div class="form-group">
            {{ form.message.label }}
            <br>
            {{ form.message(size=200, class_='form-control') }}

            {% for error in form.message.errors %}
                <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
            <br>
        </div>

        <div class="form-group">
            {{ form.secret_code.label }}
            <br>
            {{ form.secret_code(size=64, class_='form-control') }}

            {% for error in form.secret_code.errors %}
                <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
            <br>
        </div>

        <div class="form-group">
            {{ form.submit(class_='form-control') }}
        </div>
    </form>


    <div class="mb-4 mt-5">
        TOTAL MESSAGES: {{ messages | length }}
    </div>

<!--    DATA-->
    <div class="list-group ">
        {% for message in messages %}
        <a class="list-group-item list-group-item-action flex-column">
            <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1 text-success">
                    {{ message.name }}
                    <small class="text-muted"># {{ message.id }}</small>
                </h5>
                <small>{{ message.timestamp }}</small>
            </div>
            <p class="mb-1">{{ message.message }}</p>
        </a>
        {% endfor %}
    </div>
{% endblock %}